<h2>{{ order.number }}</h2>
<div>
  <h3>Order details:</h3>
  <hr />
  <h4 class="important" ng-show="order.important">
    The order has been marked as important
    <a href="#" ng-click="toggle()">x</a>
  </h4>
  <button ng-click="toggle()" ng-hide="order.important" class="btn btn-default">
    Set as important
  </button>
  <button ng-click="promote()" class="btn btn-default">Promote</button>
  <button ng-click="demote()" class="btn btn-default">Demote</button>
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editOrderModal">
    Edit order
  </button>
  <ul>
    <li>Web ID: {{ order.numberWeb }}</li>
    <li>Description: {{ order.description }}</li>
    <li>Service: {{ order.service }}</li>
    <li>Customer: {{ order.customerName }}</li>
    <li>Sum: {{ order.sum | currency }}</li>
  </ul>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Comment</th>
        <th>User</th>
        <th>Created</th>
        <th>Upvotes</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="comment in order.comments | orderBy: '-created'" ng-class="{ 'danger': comment.important }">
        <td>{{ comment.body }}</td>
        <td>{{ comment.createdBy }}</td>
        <td>{{ comment.created | timeAgo }}</td>
        <td>{{ comment.upvotes }}</td>
        <td>
          <a ng-click="upvote(comment)">^Up</a>
          <a ng-click="toggleComment(comment)">*Imp</a>
        </td>
      </tr>
    </tbody>
  </table>
  <form class="form-inline" ng-submit="addComment()">
    <h4>Add a comment</h4>
    <div class="form-group">
      <label class="sr-only" for="commentBody">Comment</label>
      <input id="commentBody" type="text" placeholder="Comment" ng-model="body"></input>
    </div>
    <div class="form-group">
      <label class="sr-only" for="commentAuthor">By</label>
      <input id="commentAuthor" type="text" placeholder="Author" ng-model="createdBy"></input>
    </div>
    <button class="btn btn-default" type="submit">Create</button>
  </form>
  <!-- Edit Order Modal -->
  <div class="modal fade" id="editOrderModal" tabindex="-1" role="dialog" aria-labelledby="editOrderLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="editOrderLabel">Edit order {{ order.number }}</h4>
        </div>
        <div class="modal-body">
          <form name="form" class="form-horizontal" ng-submit="updateOrder(order)">
          <div ng-show="updateStatus.ok">
            <span>
              Order successfully modified #{{ updateStatus.nModified }}
            </span>
          </div>
          <div ng-show="errors['form']">
            <span>{{ errors['form'] }}</span>
          </div>
          <fieldset>
          <div class="form-group">
            <label for="orderNumber">Number</label>
            <input id="orderNumber" type="text" name="number" ng-model="order.number" server-error></input>
            <p class="help-block" ng-show="form.number.$dirty && form.number.$invalid">
              <span class="text-danger" ng-show="form.number.$error.server">
                {{ errors.number }}
              </span>
            </p>
          </div>
          <div class="form-group">
            <label for="orderNumberWeb">WEB number</label>
            <input id="orderNumberWeb" type="text" ng-model="order.numberWeb"></input>
          </div>
          <div class="form-group">
            <label for="orderSum">Sum</label>
            <input id="orderSum" type="number" step="any" ng-model="order.sum"></input>
          </div>
          <div class="form-group">
            <label for="orderDescription">Description</label>
            <input id="orderDescription" type="text" ng-model="order.description"></input>
          </div>
          <div class="form-group">
            <label for="orderService">Service description</label>
            <input id="orderService" type="text" ng-model="order.service"></input>
          </div>
          <div class="form-group">
            <label for="orderCustomer">Customer name</label>
            <input id="orderCustomer" type="text" ng-model="order.customerName"></input>
          </div>
          <div class="form-group">
            <label for="orderDispatch">Dispatch</label>
            <select id="orderDispatch" class="form-control" ng-options="item.name as item.label for item in dispatch" ng-model="order.dispatch"></select>
          </div>
          <div class="form-group">
            <label for="orderPayment">Payment</label>
            <select id="orderPayment" class="form-control" ng-options="item.name as item.label for item in payment" ng-model="order.payment"></select>
          </div>
          <button type="submit" class="btn btn-primary">Update</button>  
          </fieldset>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
    </div>
  </div>

</div>
